:root{
	--bg: #f4f6f8;
	--card: #ffffff;
	--text: #243244;
	--muted: #6c7a8a;
	--border: rgba(0,0,0,.10);
	--blue: #0056b3;
	--green: #27ae60;
	--orange: #ffb020;
	--red: #e74c3c;
	--shadow: 0 10px 28px rgba(0,0,0,.10);
	--tap: 48px;
	--radius: 16px;
}

*{ box-sizing:border-box; font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; -webkit-tap-highlight-color: transparent; }
body{
	margin:0; padding:0;
	background: var(--bg);
	color: var(--text);
	height: 100vh;
	overflow:hidden;
}

body[data-theme="dark"]{
	--bg: #0b1220;
	--card: #111a2b;
	--text: #e6edf7;
	--muted: #a8b3c7;
	--border: rgba(255,255,255,.12);
	--blue: #4da3ff;
	--green: #2bd36f;
	--shadow: 0 14px 34px rgba(0,0,0,.35);
}

.screen{ height:100vh; width:100vw; }

/* ---------- Login ---------- */
.login-screen{
	display:flex;
	align-items:center;
	justify-content:center;
	padding: 18px;
}

.login-card{
	width: min(420px, 92vw);
	background: rgba(255,255,255,.92);
	border: 1px solid var(--border);
	border-radius: 22px;
	padding: 18px;
	box-shadow: var(--shadow);
}
body[data-theme="dark"] .login-card{ background: rgba(17,26,43,.96); }

.login-brand{
	display:flex; gap: 12px; align-items:center;
	margin-bottom: 14px;
}
.brand-dot{
	width: 12px; height: 12px; border-radius: 50%;
	background: var(--blue);
	box-shadow: 0 0 0 6px color-mix(in srgb, var(--blue) 20%, transparent);
}
.brand-title{ font-weight: 950; letter-spacing: .3px; font-size: 1.2rem; }
.brand-sub{ color: var(--muted); font-weight: 750; margin-top: 2px; }

.login-row{ display:grid; gap: 8px; margin-bottom: 12px; }
.login-label{ font-weight: 900; color: var(--muted); letter-spacing: .2px; font-size: .92rem; }
.login-input{
	min-height: 54px;
	border-radius: 16px;
	border: 1px solid var(--border);
	background: rgba(255,255,255,.96);
	color: var(--text);
	padding: 0 14px;
	font-weight: 850;
	outline:none;
}
body[data-theme="dark"] .login-input{ background: rgba(255,255,255,.05); }

.login-hint{
	margin-top: 12px;
	color: var(--muted);
	font-weight: 700;
	line-height: 1.35;
	font-size: .92rem;
}

/* ---------- App shell ---------- */
.app-shell{ display:flex; flex-direction:column; }

.topbar{
	height: 64px;
	display:flex;
	align-items:center;
	justify-content:space-between;
	padding: 0 10px;
	background: rgba(255,255,255,.92);
	border-bottom: 1px solid var(--border);
	position: sticky;
	top:0;
	z-index: 50;
}
body[data-theme="dark"] .topbar{ background: rgba(17,26,43,.94); }

.topbar-center{ text-align:center; flex:1; min-width:0; }
.top-title{ font-weight: 950; letter-spacing: .2px; font-size: 1.05rem; }
.top-sub{ color: var(--muted); font-weight: 750; font-size: .88rem; margin-top: 2px; }

.icon-btn{
	width: var(--tap);
	height: var(--tap);
	border-radius: 14px;
	border: 1px solid var(--border);
	background: rgba(0,0,0,.03);
	color: var(--text);
	display:grid;
	place-items:center;
	cursor:pointer;
}
body[data-theme="dark"] .icon-btn{ background: rgba(255,255,255,.05); }
.icon-btn.sm{ width: 44px; height: 44px; border-radius: 12px; }

.content{
	flex:1;
	overflow-y:auto;
	padding: 12px;
	-webkit-overflow-scrolling: touch;
}

/* ---------- Drawer ---------- */
.drawer-backdrop{
	position:fixed;
	inset:0;
	background: rgba(0,0,0,.35);
	display:none;
	align-items:stretch;
	justify-content:flex-start;
	z-index: 90;
}
.drawer-backdrop.show{ display:flex; }
body[data-theme="dark"] .drawer-backdrop{ background: rgba(0,0,0,.55); }

.drawer{
	width: min(320px, 86vw);
	height: 100%;
	background: rgba(255,255,255,.96);
	border-right: 1px solid var(--border);
	box-shadow: 14px 0 40px rgba(0,0,0,.18);
	padding: 12px;
	display:flex;
	flex-direction:column;
	gap: 12px;
}
body[data-theme="dark"] .drawer{ background: rgba(17,26,43,.97); }

.drawer-head{
	display:flex;
	align-items:center;
	gap: 10px;
}
.avatar{
	width: 44px; height: 44px;
	border-radius: 14px;
	background: color-mix(in srgb, var(--blue) 18%, transparent);
	border: 1px solid color-mix(in srgb, var(--blue) 30%, transparent);
	display:grid;
	place-items:center;
	font-weight: 950;
	color: var(--blue);
}
.drawer-user{ flex:1; min-width:0; }
.drawer-name{ font-weight: 950; letter-spacing:.2px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
.drawer-role{ color: var(--muted); font-weight: 800; font-size: .88rem; margin-top:2px; }

.drawer-section{ display:grid; gap: 8px; margin-top: 6px; }
.drawer-item{
	min-height: 54px;
	border-radius: 16px;
	border: 1px solid var(--border);
	background: rgba(0,0,0,.03);
	display:flex;
	align-items:center;
	gap: 12px;
	padding: 0 14px;
	cursor:pointer;
	font-weight: 900;
	letter-spacing:.2px;
}
body[data-theme="dark"] .drawer-item{ background: rgba(255,255,255,.05); }
.drawer-item.active{
	background: color-mix(in srgb, var(--blue) 14%, transparent);
	border-color: color-mix(in srgb, var(--blue) 30%, transparent);
	color: var(--blue);
}
.drawer-footer{ margin-top:auto; }

/* ---------- Components ---------- */
.view{ display:block; }

.panel{
	background: rgba(255,255,255,.92);
	border: 1px solid var(--border);
	border-radius: 18px;
	padding: 12px;
	box-shadow: var(--shadow);
}
body[data-theme="dark"] .panel{ background: rgba(17,26,43,.92); }

.panel-title{
	display:flex;
	align-items:center;
	justify-content:space-between;
	gap: 10px;
	font-weight: 950;
	letter-spacing:.2px;
	margin-bottom: 10px;
}

.panel-sub{
	color: var(--muted);
	font-weight: 750;
	line-height:1.35;
	font-size: .92rem;
	margin-top: -4px;
	margin-bottom: 10px;
}

.pill{
	min-height: 34px;
	padding: 6px 10px;
	border-radius: 999px;
	border: 1px solid var(--border);
	background: rgba(0,0,0,.03);
	font-weight: 900;
	color: var(--muted);
	display:inline-flex;
	align-items:center;
	gap: 8px;
}
body[data-theme="dark"] .pill{ background: rgba(255,255,255,.05); }

.chip{
	min-height: 40px;
	padding: 0 12px;
	border-radius: 14px;
	border: 1px solid var(--border);
	background: rgba(0,0,0,.03);
	cursor:pointer;
	font-weight: 900;
	display:inline-flex;
	align-items:center;
	gap: 10px;
}
body[data-theme="dark"] .chip{ background: rgba(255,255,255,.05); }

.cards-grid{
	display:grid;
	gap: 12px;
}

.stat-card{
	background: rgba(255,255,255,.96);
	border: 1px solid var(--border);
	border-radius: 18px;
	padding: 12px;
	box-shadow: 0 12px 26px rgba(0,0,0,.08);
}
body[data-theme="dark"] .stat-card{ background: rgba(17,26,43,.96); box-shadow: 0 16px 34px rgba(0,0,0,.35); }

.stat-top{ display:flex; align-items:center; justify-content:space-between; gap: 10px; }
.stat-label{ color: var(--muted); font-weight: 900; letter-spacing:.2px; }
.stat-icon{
	width: 42px; height: 42px;
	border-radius: 14px;
	display:grid;
	place-items:center;
	color: var(--blue);
	background: color-mix(in srgb, var(--blue) 12%, transparent);
	border: 1px solid color-mix(in srgb, var(--blue) 22%, transparent);
}
.stat-value{ font-size: 1.8rem; font-weight: 950; letter-spacing:.2px; margin-top: 6px; }
.stat-sub{ color: var(--muted); font-weight: 750; margin-top: 2px; font-size: .92rem; line-height: 1.35; }

.mini-list{ display:grid; gap: 10px; }
.mini-item{
	border: 1px solid var(--border);
	background: rgba(0,0,0,.03);
	border-radius: 16px;
	padding: 12px;
	display:flex;
	align-items:center;
	justify-content:space-between;
	gap: 10px;
	cursor:pointer;
}
body[data-theme="dark"] .mini-item{ background: rgba(255,255,255,.05); }
.mini-left{ display:flex; flex-direction:column; gap: 4px; min-width:0; }
.mini-title{ font-weight: 950; letter-spacing:.2px; }
.mini-sub{ color: var(--muted); font-weight: 800; font-size: .9rem; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
.mini-right{ font-weight: 950; color: var(--blue); }

.table-list{ display:grid; gap: 10px; }

.table-card{
	border: 1px solid var(--border);
	background: rgba(0,0,0,.03);
	border-radius: 18px;
	padding: 12px;
	cursor:pointer;
	display:flex;
	align-items:center;
	justify-content:space-between;
	gap: 10px;
}
body[data-theme="dark"] .table-card{ background: rgba(255,255,255,.05); }
.table-left{ min-width:0; }
.table-title{ font-weight: 950; letter-spacing:.2px; }
.table-sub{ color: var(--muted); font-weight: 800; font-size: .9rem; margin-top: 3px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
.table-right{ text-align:right; }
.badge{
	display:inline-flex;
	align-items:center;
	gap: 8px;
	min-height: 32px;
	padding: 6px 10px;
	border-radius: 999px;
	font-weight: 900;
	border: 1px solid var(--border);
	background: rgba(0,0,0,.03);
	color: var(--muted);
}
body[data-theme="dark"] .badge{ background: rgba(255,255,255,.05); }
.badge.green{ color: var(--green); border-color: color-mix(in srgb, var(--green) 32%, transparent); background: color-mix(in srgb, var(--green) 10%, transparent); }
.badge.orange{ color: var(--orange); border-color: color-mix(in srgb, var(--orange) 32%, transparent); background: color-mix(in srgb, var(--orange) 10%, transparent); }
.badge.red{ color: var(--red); border-color: color-mix(in srgb, var(--red) 32%, transparent); background: color-mix(in srgb, var(--red) 10%, transparent); }

.fab{
	width: 46px; height: 46px;
	border-radius: 16px;
	border: 1px solid color-mix(in srgb, var(--blue) 35%, transparent);
	background: color-mix(in srgb, var(--blue) 12%, transparent);
	color: var(--blue);
	cursor:pointer;
	display:grid;
	place-items:center;
}

.detail-grid{
	display:grid;
	gap: 12px;
	margin-top: 6px;
}
.field{ display:grid; gap: 8px; }
.field label{ color: var(--muted); font-weight: 900; letter-spacing:.2px; font-size: .92rem; }
.field.two{ width: 100%; }

.input, .textarea{
	border-radius: 16px;
	border: 1px solid var(--border);
	background: rgba(255,255,255,.96);
	color: var(--text);
	padding: 12px 14px;
	font-weight: 850;
	outline:none;
}
body[data-theme="dark"] .input, body[data-theme="dark"] .textarea{ background: rgba(255,255,255,.05); }

.actions-row{
	display:grid;
	gap: 10px;
	margin-top: 12px;
}

.btn{
	min-height: 52px;
	border-radius: 16px;
	border: 1px solid var(--border);
	background: rgba(0,0,0,.03);
	color: var(--text);
	cursor:pointer;
	font-weight: 950;
	letter-spacing:.2px;
	display:flex;
	align-items:center;
	justify-content:center;
	gap: 10px;
	user-select:none;
}
body[data-theme="dark"] .btn{ background: rgba(255,255,255,.05); }
.btn:active{ transform: scale(0.99); }
.btn.w100{ width:100%; }
.btn.big{ min-height: 58px; border-radius: 18px; }
.btn.primary{ background: color-mix(in srgb, var(--blue) 14%, transparent); border-color: color-mix(in srgb, var(--blue) 34%, transparent); color: var(--blue); }
.btn.secondary{ }
.btn.danger{ background: rgba(231,76,60,.10); border-color: rgba(231,76,60,.25); color: color-mix(in srgb, var(--text) 82%, #e74c3c 18%); }
.btn.warning{ background: rgba(255,176,32,.12); border-color: rgba(255,176,32,.35); color: color-mix(in srgb, var(--text) 86%, #ffb020 14%); }

.divider{
	height: 1px;
	background: var(--border);
	margin: 12px 0;
}

.history{ display:grid; gap: 10px; }
.hist-item{
	border: 1px solid var(--border);
	background: rgba(0,0,0,.03);
	border-radius: 16px;
	padding: 12px;
}
body[data-theme="dark"] .hist-item{ background: rgba(255,255,255,.05); }
.hist-title{ font-weight: 950; letter-spacing:.2px; }
.hist-sub{ color: var(--muted); font-weight: 800; font-size: .9rem; margin-top: 4px; line-height:1.35; }
.hist-total{ margin-top: 8px; font-weight: 950; color: var(--blue); }

.total-bar{
	margin-top: 12px;
	border-top: 1px solid var(--border);
	padding-top: 12px;
	display:flex;
	align-items:center;
	justify-content:space-between;
	gap: 10px;
}
.total-label{ color: var(--muted); font-weight: 900; }
.total-value{ font-size: 1.4rem; font-weight: 950; letter-spacing:.2px; }

.toast{
	position: fixed;
	left: 50%;
	bottom: 14px;
	transform: translateX(-50%);
	padding: 12px 14px;
	border-radius: 16px;
	background: rgba(0,0,0,.86);
	color: #fff;
	font-weight: 900;
	letter-spacing:.2px;
	display:none;
	z-index: 200;
	box-shadow: 0 18px 46px rgba(0,0,0,.35);
	max-width: 92vw;
	text-align:center;
}

/* ----------------------------- Call Modal (Realtime) ----------------------------- */
.call-modal{
	position: fixed;
	inset: 0;
	background: rgba(0,0,0,.55);
	display: flex;
	align-items: center;
	justify-content: center;
	z-index: 9999;
	padding: 16px;
}

.call-modal-card{
	width: min(520px, 100%);
	background: var(--panel);
	border: 1px solid rgba(255,255,255,.12);
	border-radius: 18px;
	box-shadow: 0 20px 60px rgba(0,0,0,.45);
	padding: 18px 18px 16px;
}

.call-modal-title{
	font-weight: 950;
	letter-spacing: .8px;
	color: var(--text);
	margin-bottom: 10px;
}

.call-modal-msg{
	color: var(--muted);
	font-weight: 750;
	line-height: 1.25;
	margin-bottom: 14px;
}

.call-modal-actions{
	display:flex;
	justify-content:flex-end;
}
.toast.show{ display:block; animation: toastpop .18s ease; }
@keyframes toastpop{ from{ transform: translateX(-50%) translateY(8px); opacity:0 } to{ transform: translateX(-50%) translateY(0); opacity:1 } }

/* ---------- Modals ---------- */
.modal-backdrop{
	position: fixed;
	inset: 0;
	background: rgba(0,0,0,.40);
	display:none;
	align-items:center;
	justify-content:center;
	padding: 14px;
	z-index: 120;
}
.modal-backdrop.show{ display:flex; }
body[data-theme="dark"] .modal-backdrop{ background: rgba(0,0,0,.60); }

.modal-card{
	width: min(560px, 94vw);
	border-radius: 20px;
	overflow:hidden;
	background: rgba(255,255,255,.96);
	border: 1px solid var(--border);
	box-shadow: 0 22px 60px rgba(0,0,0,.28);
}
body[data-theme="dark"] .modal-card{ background: rgba(17,26,43,.97); }

.modal-card.tall{ max-height: 86vh; display:flex; flex-direction:column; }
.modal-head{
	display:flex;
	align-items:center;
	justify-content:space-between;
	padding: 12px;
	border-bottom: 1px solid var(--border);
}
.modal-title{ font-weight: 950; letter-spacing:.2px; display:flex; align-items:center; gap: 10px; }
.modal-body{ padding: 12px; overflow:auto; -webkit-overflow-scrolling: touch; }
.modal-actions{ padding: 12px; border-top: 1px solid var(--border); display:flex; gap: 10px; }

.modal-row{ display:grid; gap: 8px; margin-bottom: 12px; }
.modal-label{ font-weight: 900; color: var(--muted); letter-spacing:.2px; font-size:.92rem; }

.modal-input{
	min-height: 54px;
	border-radius: 16px;
	border: 1px solid var(--border);
	padding: 0 14px;
	font-weight: 850;
	background: rgba(255,255,255,.96);
	color: var(--text);
	outline:none;
}
body[data-theme="dark"] .modal-input{ background: rgba(255,255,255,.05); }

.modal-hint{ color: var(--muted); font-weight: 750; line-height:1.35; font-size:.92rem; margin-bottom: 10px; }

/* Items picker */
.cat{
	border: 1px solid var(--border);
	border-radius: 18px;
	overflow:hidden;
	margin-bottom: 10px;
}
.cat-head{
	padding: 12px;
	background: rgba(0,0,0,.03);
	display:flex;
	align-items:center;
	justify-content:space-between;
	font-weight: 950;
}
body[data-theme="dark"] .cat-head{ background: rgba(255,255,255,.05); }
.cat-body{ padding: 10px; display:grid; gap: 10px; }

.item-row{
	border: 1px solid var(--border);
	border-radius: 16px;
	padding: 10px;
	display:flex;
	align-items:center;
	justify-content:space-between;
	gap: 10px;
}
.item-left{ min-width:0; }
.item-name{ font-weight: 950; letter-spacing:.2px; }
.item-price{ color: var(--muted); font-weight: 900; margin-top: 3px; }
.qty{
	display:flex;
	align-items:center;
	gap: 8px;
}
.qbtn{
	width: 44px; height: 44px;
	border-radius: 14px;
	border: 1px solid var(--border);
	background: rgba(0,0,0,.03);
	color: var(--text);
	cursor:pointer;
	display:grid;
	place-items:center;
	font-weight: 950;
}
body[data-theme="dark"] .qbtn{ background: rgba(255,255,255,.05); }
.qval{ width: 34px; text-align:center; font-weight: 950; color: var(--blue); }

/* Cash */
.cash-summary{
	border: 1px solid var(--border);
	border-radius: 18px;
	padding: 12px;
	background: rgba(0,0,0,.03);
	margin-bottom: 10px;
}
body[data-theme="dark"] .cash-summary{ background: rgba(255,255,255,.05); }
.cash-line{ display:flex; justify-content:space-between; gap: 10px; font-weight: 900; }
.cash-line span{ color: var(--muted); font-weight: 850; }

.seg{
	display:grid;
	grid-template-columns: 1fr 1fr;
	gap: 10px;
	margin-bottom: 10px;
}
.seg-btn{
	min-height: 52px;
	border-radius: 16px;
	border: 1px solid var(--border);
	background: rgba(0,0,0,.03);
	cursor:pointer;
	font-weight: 950;
	display:flex;
	align-items:center;
	justify-content:center;
	gap: 10px;
}
body[data-theme="dark"] .seg-btn{ background: rgba(255,255,255,.05); }
.seg-btn.active{
	background: color-mix(in srgb, var(--blue) 14%, transparent);
	border-color: color-mix(in srgb, var(--blue) 34%, transparent);
	color: var(--blue);
}

.denoms{
	display:grid;
	grid-template-columns: repeat(3, 1fr);
	gap: 10px;
	margin-bottom: 10px;
}
.denom{
	min-height: 52px;
	border-radius: 16px;
	border: 1px solid var(--border);
	background: rgba(0,0,0,.03);
	cursor:pointer;
	font-weight: 950;
	display:flex;
	align-items:center;
	justify-content:center;
	gap: 8px;
}
body[data-theme="dark"] .denom{ background: rgba(255,255,255,.05); }
.denom .small{ color: var(--muted); font-weight: 850; }

.cash-totals{
	border-top: 1px solid var(--border);
	padding-top: 10px;
	display:grid;
	gap: 8px;
	margin-bottom: 10px;
}

.session-cards{ display:grid; gap: 12px; }

@media (min-width: 520px){
	.cards-grid{ grid-template-columns: repeat(2, 1fr); }
	.session-cards{ grid-template-columns: repeat(2, 1fr); }
}
